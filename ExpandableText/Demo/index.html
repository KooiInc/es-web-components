<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Demo <expandable-text></title>
  <link href="../../Img/dev_ico.png" rel="icon">
  <script src="prism.js" id="prismES"></script>
  <link id="headerBlockStyling" href="./customStyling.css" rel="stylesheet"/>
  <link rel="stylesheet" href="prism.css" id="prismCss" />
</head>
<body>
  <expandable-text class="start" id="headerRoot" data-preview="1" data-external-css-id="headerBlockStyling">
    <template>
      <div class="expand-ttl">A web component to display html in a expandable/collapsible way</div>
      <div>
        Here is a web component creating a (autonomous) custom element to display text
        in an expandable/collapsible way.
      </div>

      <p>
        The custom element is <code>&lt;expandable-text></code>.
        <br>The following chapters (in the form of nested <code>&lt;expandable-text></code>
        elements) explain the usage of it.
      </p>

      <p>
        <b data-expand-all>Expand all chapters below</b> |
        <b data-collapse-all>Collapse all chapters below</b>
      </p>

      <expandable-text data-title="The content of an <expandable-text> element"
                       class="chapter"
                       data-external-css-id="headerBlockStyling">
        <div>
          The <i><b>content</b></i> of an <code>&lt;expandable-text></code> element
          can be created in three ways
        </div>

        <ul>
          <li>Html within the element<br>
            <b>Note</b>: with a lot of html the element may flash on page load
            (while the custom element is initializing)</li>
          <li>A <code>template</code> element within the element</li>
          <li>An external <code>template</code> with an id.
            <div>In this case the
              <code>&lt;expandable-text></code> should have a <code>data-attribute</code>:<br>
                &nbsp;&nbsp;<code>&lt;expandable-text data-content-id="[the template id]"></code>
            </div>
          </li>
        </ul>

        <div class="pp">
          By default the content is invisible. Using a <code>data-attribute</code>
          one can however enable a "preview mode".
          <br>See <i data-open-from-id="previewMode">Preview mode of an &lt;expandable-text>
            element</i>.
        </div>

        <div>
          <b>Note</b>: when an <code>&lt;expandable-text></code> element does not contain
          content, it will be removed. This will be reported in the console.
        </div>
      </expandable-text>

      <expandable-text data-title="Preview mode of an <expandable-text> element"
                       class="chapter"
                       id="previewMode"
                       data-external-css-id="headerBlockStyling">
        <div class="p">
          By default the <code>&lt;expandable-text></code> content is hidden (so all you
          see is the title).
        </div>

        <div class="p">
          <code>&lt;expandable-text></code> can be connected with a default
          <i><b>preview area</b></i> with a maximum height of 80 pixels
          and a vertical gradient (vertical 'fade out').
        </div>

        <div>
          To activate preview mode, create the element with
          <code>&lt;expandable-text data-preview="1"></code>. See last example.
          <br><b>Note</b>: when a preview is active and the
          <code>&lt;expandable-text></code> is collapsed, the user can
          also click the preview area to expand the content.
        </div>
      </expandable-text>

      <expandable-text data-title="The title of an <expandable-text> element"
                       class="chapter"
                       data-external-css-id="headerBlockStyling">
        <div class="p">
          The title of a <code>&lt;expandable-text></code> display is displayed
          as bold text preceded by a small arrow down symbol.
          It spans one line. When the length of a title exceeds the available line space
          it is abbreviated with an ellipsis (&hellip;).
          The title receives a <code>title attribute</code> containing the full title.
        </div>

        <div>
          The <i><b>title</b></i> of an <code>&lt;expandable-text></code> element can be
          created in two ways:
        </div>

        <ul>
          <li>A div with class "expand-ttl" within the html of the custom element (either the
            plain html or the template html):<br>
            <code>&lt;div class="expand-ttl">[the title]&lt;/div></code>
          </li>
          <li>A <code>data-attribute</code>:<br>
            <code>&lt;expandable-text data-title="[the title]"></code>
          </li>
        </ul>
        <div class="p"></div>
        <div><b>Notes</b>:</div>
        <ul>
          <li>the title can not contain html (it will be removed)</li>
          <li>when <code>&lt;expandable-text></code> elements are nested deeper than
            one level, for the deeper levels one can <i>only</i> use the second
            method (<code>data-attribute</code>) to create the title.</li>
        </ul>
      </expandable-text>

      <expandable-text data-title="The styling of an <expandable-text> element"
                       id="componentStyling"
                       class="chapter"
                       data-external-css-id="headerBlockStyling">
        <div class="p">
          The default styling for this module can be found in the file
          <code>ExpandableText.css</code>  within the module directory.
          It is preloaded on creating the custom element (so, on importing the module).
        </div>

        <div>
          The Styling of an expandable fragment is kept minimal. In other words, if you don't add
          css in the containing document for the <code>&lt;expandable-text></code> element
          or within the <code>&lt;expandable-text></code> element content (see
          <i data-open-from-id="customStyling">Custom styling of
          an &lt;expandable-text> element</i> in the following) it will inherit its styling mostly
          from the parent it resides in.
        </div>
      </expandable-text>

      <expandable-text data-title="Custom styling of an <expandable-text> element"
                       class="chapter"
                       id="customStyling"
                       data-external-css-id="headerBlockStyling">
        <div class="p">
          One can modify the styling of the title and content of a single
          <code>&lt;expandable-text></code> element using a <code>&lt;style></code> element
          within the html (either plain HTML, or the inner/external template). See
          the fourth example to get an idea of that.
        </div>

        <div>
          <i>Alternatively</i> one can create a <code>&lt;style></code> element
          <i>with an id</i> within the document and add that 'tell' the expandable fragment
          to use that: <code>&lt;expandable-text data-external-css-id="[the id of
            the style element]"></code>.
        </div>

        <div class="pp"><b>Note</b>: the <code>style</code> element can also
          be an <i>external link</i> (<code>&lt;link rel="stylesheet" href="..."
            id="[data-external-css-id from the custom element]"></code>)</div>


        <div>
          The <code>link</code> technique for extra styling is used
          for the <code>&lt;expandable-text></code> you are reading now. Check the 
          document source (right click the document, select "view page source").
        </div>
      </expandable-text>

      <expandable-text data-title="Linking to a nested <expandable-text> element"
                       class="chapter"
                       data-external-css-id="headerBlockStyling">
        <div class="p">
          When an <code>&lt;expandable-text></code> element contains several nested
          <code>&lt;expandable-text></code> elements (like the one you are reading now)
          it is possible to link to one of these nested <code>&lt;expandable-text></code> elements.
        </div>

        <div class="p">
          To link to another nested <code>&lt;expandable-text></code> element:
        </div>

        <ul>
          <li>
            First identify the element to link to, and give it an id
            (<code>&lt;expandable-text id="something" ...></code>).
          </li>
          <li>
            Next, in the content of the <code>&lt;expandable-text></code> element where the
            link should reside create an element with the data-attribute
            <code>data-open-from-id</code>, e.g.
            <code>&lt;span data-open-from-id="something">&lt;/span></code>.
          </li>
        </ul>

        <div class="pp">
          That's it! The element containing the data-attribute has a different
          color and cursor. Clicking it will expand the identified
          <code>&lt;expandable-text></code> element (when not already expanded)
          within its root <code>&lt;expandable-text></code> element
          and will try to scroll to it (if applicable).
        </div>

        <div>
          <b>Example</b>
          <span data-open-from-id="componentStyling">
           "The styling of an &lt;expandable-text> element".
          </span>
        </div>

      </expandable-text>

      <expandable-text data-title="Expand/collapse all open nested <expandable-text> elements"
                       class="chapter"
                       data-external-css-id="headerBlockStyling">
        <div>
          When an <code>&lt;expandable-text></code> element contains several nested
          <code>&lt;expandable-text></code> elements (like the one you are reading now)
          it is possible to create a link to expand or collapse all open/closed
          nested <code>&lt;expandable-text></code> elements in it.
        </div>

        <div class="p">
          This is done by creating an element containing either <code>data-collapse-all</code>
          or <code>data-expand-all</code> at the top
          level of the <code>&lt;expandable-text></code> element containing nested
          <code>&lt;expandable-text></code> elements.
        </div>

        <div class="pt">
          <b>Example</b>
          <br>A span to collapse all <code>&lt;span data-collapse-all>...&lt;/span></code>.
          <br>Idem to expand all: <code>&lt;span data-expand-all>...&lt;/span></code>.
        </div>
      </expandable-text>

      <expandable-text class="markup chapter"
                       data-external-css-id="headerBlockStyling">
        <link rel="stylesheet" href="./prism.css"/>
        <div class="expand-ttl">
          HTML structure within the shadowroot of a connected &lt;expandable-text> element
        </div>
        <p>
          The final HTML structure of a <i>connected</i> <code>&lt;expandable-text></code> element
          may be useful when one wants to apply custom styling.
        </p>
        <div id="styleHtml">
        <pre class="language-markup"><code class="language-html">&lt;div
  class="expand-title"
  [data-preview="[anything]"]
  [data-content-id="[id of external content template]"]>
  &lt;div class="arrow"><span class="gray">&lt!-- the arrow element --></span>&lt;/div>
  &lt;div class="title" title="..."><span class="gray">&lt!-- the title --></span>&lt;/div>
&lt;/div>
&lt;div class="expand-content [preview]">
  <span class="gray">&lt!-- the html provided --></span>
&lt;/div></code></pre>
        </div>
      </expandable-text>
    </template>
  </expandable-text>
  <script type="module" src="./index.js"></script>
</body>
</html>