<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Demo <expandable-text></title>
  <link rel="stylesheet" href="prism.css" id="prismCss" />
  <script src="prism.js" id="prismES"></script>
  <style id="headerBlockStyling">
    :host-context(.chapter) {
      .expand-title[data-expanded] .arrow:before {
        content: '\21f2';
        display: inline-block;
        color: green;
        font-weight: normal;
        font-size: 1.1em;
        vertical-align: middle;
        transition: all 1s ease;
      }

      .expand-title[data-expanded='1'] .arrow:before {
        transform: rotateX(3.14rad);
      }
    }

    :host-context(.markup) {
      .expand-title[data-expanded='1'] + .expand-content {
        border: none;
        padding: 0;
        margin-top: -0.5em;
        font: 14px/17px normal verdana, arial, sans-serif;
      }
    }

    :host-context(expandable-text:not(.start)) {
      .expand-title .title {color: #888; font-size: 1rem;}
    }

    :host {
      color: #333;

      expandable-text:not(.markup) {
        margin-bottom: 1rem;
      }

      [data-expanded='1'] ~ .expand-content {
        padding: 1em;
        margin-left: 0;
        max-height: 60vh;

        div.p {margin-bottom: 0.6rem;}
      }

      code:not([class*=language-]) {
        background-color: #eee;
        color: green;
        padding: 1px;
      }

      .expand-content {
        h3 {
          margin: 0.5em auto 0.2em auto;
          color: #888;
        }

        h3 ~ p {
          margin-top: 0;
        }

        ul ~ h3 {
          margin-top: 1em;
        }

        ul {
          margin: 0.5rem 0 0 -1.5rem;
        }

        ul li {
          margin-top: 0.2rem;
          list-style: 'âœ“ ';
        }

        ul li:last-child {
          padding-bottom: 0;
          margin-bottom: 0;
        }
      }
    }
  </style>
</head>
<body>
  <expandable-text class="start" data-preview="1" data-external-css-id="headerBlockStyling">
    <template>
      <div class="expand-ttl">A web component to display html in a expandable/collapsible way</div>
      <div>
        Here is a web component creating a (autonomous) custom element to display text
        in an expandable/collapsible way.
      </div>

      <p>
        The custom element (we call it expandable fragment here) is
        <code>&lt;expandable-text></code>
      </p>

      <p>
        The styling for this module can be found in the file <code>ExpandableText.css</code> within
        the module directory. It is preloaded on creating the custom element (so, on importing
        the module).
      </p>
      <p>
        Styling of an expandable fragment is kept minimal. In other words, if you don't add
        css in the containing document for the <code>&lt;expandable-text></code> element
        or within the <code>&lt;expandable-text></code> element content (see <i>Expandable
        fragment styling</i> in the following) it will inherit its styling mostly from the parent
        it resides in.
      </p>

      <expandable-text class="chapter"
                       data-title="Expandable fragment content"
                       data-external-css-id="headerBlockStyling">
        <div>
          The <i><b>content</b></i> of an <code>&lt;expandable-text></code> element
          can be created in three ways
        </div>

        <ul>
          <li>Html within the element<br>
            <b>Note</b>: with a lot of html the element may flash on page load
            (while the custom element is initializing)</li>
          <li>A <code>template</code> element within the element</li>
          <li>An external <code>template</code> with an id.
            <div>In this case the
              <code>&lt;expandable-text></code> should have a <code>data-attribute</code>:<br>
                &nbsp;&nbsp;<code>&lt;expandable-text data-content-id="[the template id]"></code>
            </div>
          </li>
        </ul>
      </expandable-text>

      <expandable-text class="chapter"
                       data-title="Expandable fragment title"
                       data-external-css-id="headerBlockStyling">
        <div class="p">
          The title of a <code>&lt;expandable-text></code> display is displayed
          as a bold title preceded by a small arrow down symbol.
          It will always span one line. When the length of a title exceeds the line space
          it is abbreviated with an ellipsis (&hellip;).
          The title receives a <code>title attribute</code> containing the full title.
        </div>

        <div>
          The <i><b>title</b></i> of an <code>&lt;expandable-text></code> element can be
          created in two ways:
        </div>

        <ul>
          <li>A div with class "expand-ttl" within the html of the custom element (either the
            plain html or the template html):<br>
            <code>&lt;div class="expand-ttl">[the title]&lt;/div></code>
          </li>
          <li>A <code>data-attribute</code>:<br>
            <code>&lt;expandable-text data-title="[the title]"></code>
          </li>
          <li><b>Note</b>: the title can not contain html (it will be removed)</li>
        </ul>
      </expandable-text>

      <expandable-text class="chapter"
                       data-title="Custom expandable fragment styling"
                       data-external-css-id="headerBlockStyling">
        <div class="p">
          One can modify the styling of the title and content of a single
          <code>&lt;expandable-text></code> element using a <code>&lt;style></code> element
          within the html (either plain HTML, or the inner/external template). See
          the fourth example to get an idea of that.
        </div>

        <div class="p">
          <b><i>Alternatively</i></b> one can create a <code>&lt;style></code> element
          <i>with an id</i> within the head section of the document and add that to
          the expandable fragment  using
          <code>&lt;expandable-text data-external-css-id="[the id of the style element]"></code>.
        </div>

        <div>
          Techniques for extra styling are used within the <code>&lt;expandable-text></code>
          you are reading now. Check the document source (right click the document, select
          "view page source").
        </div>
      </expandable-text>

      <expandable-text class="chapter"
                       data-title="Preview mode"
                       data-external-css-id="headerBlockStyling">
        <div class="p">
          By default the <code>&lt;expandable-text></code> content is hidden (so all you
          see is the title).
        </div>

        <div class="p">
          <code>&lt;expandable-text></code> can be connected with a default
          <i><b>preview area</b></i> with a maximum height of 80 pixels
          and a vertical gradient (vertical 'fade out').
        </div>

        <div>
          To activate preview mode, create the element with
          <code>&lt;expandable-text data-preview="1"></code>. See last example.
          <br><b>Note</b>: when a preview is active and the
          <code>&lt;expandable-text></code> is collapsed, the user can
          also click the preview area to expand the content.
        </div>
      </expandable-text>

      <expandable-text class="markup chapter"
                       data-title="HTML structure within the shadowroot of a connected element"
                       data-external-css-id="headerBlockStyling">
        <link rel="stylesheet" href="./prism.css"/>
        <div id="styleHtml">
        <pre class="language-markup"><code class="language-html">&lt;div
  class="expand-title"
  [data-preview="[anything]"]
  [data-content-id="[id of external content template]"]>
  &lt;div class="arrow"><span class="gray">&lt!-- the arrow element --></span>&lt;/div>
  &lt;div class="title" title="..."><span class="gray">&lt!-- the title --></span>&lt;/div>
&lt;/div>
&lt;div class="expand-content [preview]">
  <span class="gray">&lt!-- the html provided --></span>
&lt;/div></code></pre>
        </div>
      </expandable-text>
    </template>
  </expandable-text>
  <script type="module" src="./index.js"></script>
</body>
</html>